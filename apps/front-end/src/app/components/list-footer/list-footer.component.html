<ng-container *ngIf="!isSummary">
  <footer
    class="add-card-row mt-10 space-between w-full"
    [class.isCreatingCard]="isCreatingCard"
  >
    <div class="flex flex-1">
      <button
        *ngIf="!isCreatingCard"
        (click)="isCreatingCard = !isCreatingCard"
        pButton
        class="p-button-sm p-button-text p-button-plain"
        icon="pi pi-plus"
        label="Add a card"
      ></button>
      <div class="flex flex-1 flex-end align-center" *ngIf="!isCreatingCard">
        <ng-container *ngTemplateOutlet="totalTmpl"></ng-container>
      </div>
    </div>
    <form
      class="w-full"
      [formGroup]="form"
      *ngIf="isCreatingCard"
      (keydown.escape)="stopCreatingCard($event)"
      (submit)="submitCard($event)"
    >
      <div class="flex-column my-10 gap-10 w-full" [ngSwitch]="type">
        <ng-container *ngSwitchCase="stock">
          <p-autoComplete
            class="w-full"
            appendTo="body"
            (completeMethod)="searchStock($event)"
            [formControl]="selectedStock"
            [dropdown]="true"
            [itemSize]="34"
            [suggestions]="stockSuggestions"
            [virtualScroll]="true"
            placeholder="Search for symbols or companies..."
            field="label"
          >
          </p-autoComplete>
        </ng-container>
        <ng-container *ngSwitchDefault>
          <budgetello-text-input
            class="w-full"
            [small]="true"
            [formControl]="cardTitleFormControl"
            placeholder="Card title..."
            [autofocus]="true"
            iconLeft="pi pi-book"
          >
          </budgetello-text-input>

          <budgetello-text-input
            class="w-full"
            [small]="true"
            [formControl]="cardAmountFormControl"
            placeholder="Amount..."
            [autofocus]="true"
            type="number"
            iconLeft="pi pi-dollar"
          >
          </budgetello-text-input>
        </ng-container>
      </div>

      <div class="flex w-full">
        <button
          pButton
          class="p-button-sm p-button-text p-button-plain"
          label="Add"
        ></button>
        <button
          pButton
          (click)="stopCreatingCard($event)"
          class="mx-10 p-button-sm p-button-text p-button-plain"
          icon="pi pi-times"
        ></button>

        <div class="flex flex-1 flex-end align-center" *ngIf="isCreatingCard">
          <ng-container *ngTemplateOutlet="totalTmpl"></ng-container>
        </div>
      </div>
    </form>
  </footer>

  <ng-template #totalTmpl>
    <div
      class="flex align-center total cursor-default"
      pTooltip="{{
        total === 0 ? '0' : (total | currency: 'USD':'symbol':'1.0')
      }}"
      tooltipPosition="bottom"
    >
      <i class="pi pi-eye mx-4"></i>Total
    </div>
  </ng-template>
</ng-container>
