<div
  class="board"
  cdkDropList
  cdkDropListOrientation="horizontal"
  cdkDropListGroup
  (cdkDropListDropped)="dropList($event)"
>
  <div class="list" cdkDrag *ngFor="let list of lists">
    <p class="list-title">
      {{ list.title }}
    </p>
    <div
      class="cards"
      cdkDropList
      [cdkDropListData]="list.cards"
      (cdkDropListDropped)="drop($event)"
    >
      <div class="card" cdkDrag *ngFor="let card of list.cards">
        <ng-container
          *ngTemplateOutlet="cardTemplate; context: { $implicit: card }"
        ></ng-container>
      </div>
    </div>
  </div>
  <div class="list add" [class.editing]="isEditing" (click)="isEditing = true">
    <ng-container *ngIf="!isEditing"> + Add another list </ng-container>
    <form class="add-list-form" *ngIf="isEditing" (submit)="addList($event)">
      <ng-container *ngIf="addListTemplate; else defaultAddListForm">
        <ng-container *ngTemplateOutlet="addListTemplate"></ng-container>
      </ng-container>
    </form>
  </div>
</div>

<ng-template #defaultAddListForm>
  <input
    [formControl]="listTitleFormControl"
    pInputText
    placeholder="Enter list title"
    type="text"
  />
  <div class="space-between mt-6">
    <button
      pButton
      type="submit"
      class="p-button-text"
      icon="pi pi-plus"
    ></button>
    <button
      pButton
      type="button"
      class="p-button-text"
      icon="pi pi-times"
      (click)="stopEditing($event)"
    ></button>
  </div>
</ng-template>
